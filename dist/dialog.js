var e={label:"Dialog",description:"",alert:!1,openClass:"is-open"},t=["input","select","textarea","button","iframe","a[href]","area[href]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'];function n(e){e&&e instanceof HTMLElement&&e.focus&&e.focus()}function i(e){return Array.from(e.querySelectorAll(t)).filter(function(e){return function(e){if(function(e){return"INPUT"===e.tagName||"radio"===e.type}(e)&&!function(e){return!Array.from(document.getElementsByName(e.name)).some(function(e){return e.checked})||e.checked}(e))return!1;var t=parseInt(e.getAttribute("tabindex"),10);return!(t&&t<0||e.hidden||e.disabled||null===e.offsetParent||"hidden"===getComputedStyle(e).visibility)}(e)})}exports.dialog=function(t,o,a){var r=!1,l=!1,d={triggeringElement:void 0,main:document.getElementById(o),dialog:document.getElementById(t)};if(!d.dialog)throw new Error('No element with the id "'+t+'"');if(!d.main)throw new Error('No element with the id "'+o+'"');var c=Object.assign({},e,a),u=function(e){var t=!1;function o(o){var a=!e.contains(document.activeElement);o.preventDefault(),o.stopImmediatePropagation(),a&&t&&function(e){var t=i(e);t.length&&n(t[0])}(e)}function a(t){"Tab"===t.key&&function(e,t){var o=document.activeElement,a=i(e),r=a[0],l=a[a.length-1];t.shiftKey&&o==r&&(n(l),t.preventDefault()),t.shiftKey||o!=l||(n(r),t.preventDefault())}(e,t)}return{activate:function(e){t||(n(e),t=!0,document.addEventListener("focusin",o,!0),document.addEventListener("keydown",a,!0))},deactivate:function(e){t&&(document.removeEventListener("focusin",o,!0),document.removeEventListener("keydown",a,!0),n(e),t=!1)}}}(d.dialog);function s(e){"Escape"===e.key&&m()}function f(e){!r&&l&&g("open")&&(e instanceof HTMLElement&&(d.triggeringElement=e),r=!0,d.dialog.classList.add(c.openClass),document.addEventListener("keydown",s,!0),u.activate(d.dialog.querySelector("[data-dialog-autofocus]")))}function m(){r&&l&&g("close")&&(u.deactivate(d.triggeringElement),r=!1,document.removeEventListener("keydown",s,!0),d.dialog.classList.remove(c.openClass))}function g(e){var t=new CustomEvent(e,{bubbles:!0,cancelable:!0});return d.dialog.dispatchEvent(t)}return{elements:d,create:function(){if(d.dialog.setAttribute("role",c.alert?"alertdialog":"dialog"),d.dialog.setAttribute("aria-modal",!0),c.label){var e=document.getElementById(c.label);d.dialog.setAttribute("aria-"+(e?"labelledby":"label"),c.label)}c.description&&document.getElementById(c.description)&&d.dialog.setAttribute("aria-describedby",c.description),l=!0,g("create")},destroy:function(){m(),l=!1,["role","aria-modal","aria-label","aria-labeledby","aria-describedby"].forEach(function(e){return d.dialog.removeAttribute(e)}),g("destroy")},open:f,close:m,toggle:function(e){void 0===e&&(e=!r),e?f():m()},isOpen:r,on:function(e,t){d.dialog.addEventListener(e,t)},off:function(e,t){d.dialog.removeEventListener(e,t)}}};
//# sourceMappingURL=dialog.js.map
