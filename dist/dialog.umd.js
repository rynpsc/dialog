!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.dialog={})}(this,function(e){var t={label:"Dialog",description:"",alert:!1,openClass:"is-open"},i=["[contenteditable]",'[tabindex]:not([tabindex^="-"])',"a[href]","area[href]","button:not([disabled])","embed","iframe","input:not([disabled])","object","select:not([disabled])","textarea:not([disabled])"];function n(e){return[].concat(e.querySelectorAll(i)).filter(function(e){return i=!((t=e).offsetWidth||t.offsetHeight||t.getClientRects().length),n="hidden"===window.getComputedStyle(t).visibility,!(i||n);var t,i,n})}function o(e){e&&e.focus&&e.focus()}function a(e){var t=n(e);t.length&&o(t[0])}e.dialog=function(e,i,d){var r={main:document.getElementById(i),dialog:document.getElementById(e)},l=function(){var e=Object.create(null);return{on:function(t,i){if(t&&i){var n=e[t]=e[t]||[];-1==n.indexOf(i)&&n.push(i)}},off:function(t,i){void 0===i&&(i=!1),i?e[t].splice(e[t].indexOf(i),1):delete e[t]},emit:function(t){for(var i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];(e[t]||[]).forEach(function(e){return e.apply(e,i)})}}}();if(!r.dialog)throw new Error('No element with the id "'+e+'"');if(!r.main)throw new Error('No element with the id "'+i+'"');var c=Object.assign({},t,d),u=function(e,t){var i=!1,d=void 0;function r(t){var n=!e.contains(document.activeElement);t.preventDefault(),t.stopImmediatePropagation(),n&&i&&a(e)}function l(t){"Tab"===t.key&&function(e,t){var i=document.activeElement,a=n(e),d=a[0],r=a[a.length-1];t.shiftKey&&i===d&&(o(r),t.preventDefault()),t.shiftKey||i!==r||(o(d),t.preventDefault())}(e,t)}return{activate:function(){i||(i=!0,d=document.activeElement,t&&e.contains(t)?o(t):a(e),document.addEventListener("focus",r,!0),document.addEventListener("keydown",l,!0))},deactivate:function(){i&&(i=!1,o(d),d=void 0,document.removeEventListener("focus",r,!0),document.removeEventListener("keydown",l,!0))}}}(r.dialog,c.focus),s=!1,f=!1;function m(e){"Escape"===e.key&&v()}function b(){var e=c.alert?"alertdialog":"dialog",t=document.getElementById(c.label)?"labeledby":"label";if(r.main.setAttribute("aria-hidden",!1),r.dialog.setAttribute("role",e),r.dialog.setAttribute("aria-modal",!0),r.dialog.setAttribute("aria-"+t,c.label),r.dialog.setAttribute("aria-hidden",!0),document.getElementById(c.description))r.dialog.setAttribute("aria-describedby",c.description);else if(c.description)throw new Error('Invalid element: No element with the id "'+c.description+'"');r.main.contains(r.dialog)&&document.body.appendChild(r.dialog),f=!0,l.emit("create",r.dialog)}function g(){!s&&f&&(s=!0,r.main.setAttribute("aria-hidden",!0),r.dialog.setAttribute("aria-hidden",!1),r.dialog.classList.add(c.openClass),l.emit("open",r.dialog),document.addEventListener("keydown",m,!0),u.activate())}function v(){s&&f&&(u.deactivate(),s=!1,r.main.setAttribute("aria-hidden",!1),r.dialog.setAttribute("aria-hidden",!0),document.removeEventListener("keydown",m,!0),r.dialog.classList.remove(c.openClass),l.emit("close",r.dialog))}return c.autoInit&&b(),{elements:r,create:b,destroy:function(){v(),f=!1,["aria-describedby","aria-label","aria-labeledby","aria-modal","role"].forEach(function(e){return r.dialog.removeAttribute(e)}),l.emit("destroy",r.dialog)},open:g,close:v,toggle:function(e){void 0===e&&(e=!s),e?g():v()},isOpen:s,on:l.on,off:l.off}}});
//# sourceMappingURL=dialog.umd.js.map
