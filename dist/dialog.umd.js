!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.dialog={})}(this,function(e){var t={label:"Dialog",description:"",alert:!1,openClass:"is-open"},n=["input","select","textarea","button","iframe","a[href]","area[href]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'];function o(e){e&&e instanceof HTMLElement&&e.focus&&e.focus()}function i(e){return Array.from(e.querySelectorAll(n)).filter(function(e){return function(e){if(function(e){return"INPUT"===e.tagName||"radio"===e.type}(e)&&!function(e){return!Array.from(document.getElementsByName(e.name)).some(function(e){return e.checked})||e.checked}(e))return!1;var t=parseInt(e.getAttribute("tabindex"),10);return!(t&&t<0||e.hidden||e.disabled||null===e.offsetParent||"hidden"===getComputedStyle(e).visibility)}(e)})}e.dialog=function(e,n,a){var r=!1,d=!1,l={triggeringElement:void 0,main:document.getElementById(n),dialog:document.getElementById(e)};if(!l.dialog)throw new Error('No element with the id "'+e+'"');if(!l.main)throw new Error('No element with the id "'+n+'"');var c=Object.assign({},t,a),u=function(e){var t=!1;function n(n){var a=!e.contains(document.activeElement);n.preventDefault(),n.stopImmediatePropagation(),a&&t&&function(e){var t=i(e);t.length&&o(t[0])}(e)}function a(t){"Tab"===t.key&&function(e,t){var n=document.activeElement,a=i(e),r=a[0],d=a[a.length-1];t.shiftKey&&n==r&&(o(d),t.preventDefault()),t.shiftKey||n!=d||(o(r),t.preventDefault())}(e,t)}return{activate:function(e){t||(o(e),t=!0,document.addEventListener("focusin",n,!0),document.addEventListener("keydown",a,!0))},deactivate:function(e){t&&(document.removeEventListener("focusin",n,!0),document.removeEventListener("keydown",a,!0),o(e),t=!1)}}}(l.dialog);function s(e){"Escape"===e.key&&m()}function f(e){!r&&d&&g("open")&&(e instanceof HTMLElement&&(l.triggeringElement=e),r=!0,l.dialog.classList.add(c.openClass),document.addEventListener("keydown",s,!0),u.activate(l.dialog.querySelector("[data-dialog-autofocus]")))}function m(){r&&d&&g("close")&&(u.deactivate(l.triggeringElement),r=!1,document.removeEventListener("keydown",s,!0),l.dialog.classList.remove(c.openClass))}function g(e){var t=new CustomEvent(e,{bubbles:!0,cancelable:!0});return l.dialog.dispatchEvent(t)}return{elements:l,create:function(){if(l.dialog.setAttribute("role",c.alert?"alertdialog":"dialog"),l.dialog.setAttribute("aria-modal",!0),c.label){var e=document.getElementById(c.label);l.dialog.setAttribute("aria-"+(e?"labelledby":"label"),c.label)}c.description&&document.getElementById(c.description)&&l.dialog.setAttribute("aria-describedby",c.description),d=!0,g("create")},destroy:function(){m(),d=!1,["role","aria-modal","aria-label","aria-labeledby","aria-describedby"].forEach(function(e){return l.dialog.removeAttribute(e)}),g("destroy")},open:f,close:m,toggle:function(e){void 0===e&&(e=!r),e?f():m()},isOpen:r,on:function(e,t){l.dialog.addEventListener(e,t)},off:function(e,t){l.dialog.removeEventListener(e,t)}}}});
//# sourceMappingURL=dialog.umd.js.map
