!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.dialog=t()}(this,function(){var e={label:"Dialog",description:"",alert:!1,openClass:"is-open"},t=["[contenteditable]",'[tabindex]:not([tabindex^="-"])',"a[href]","area[href]","button:not([disabled])","embed","iframe","input:not([disabled])","object","select:not([disabled])","textarea:not([disabled])"];function n(e){return[].concat(e.querySelectorAll(t)).filter(function(e){return n=!((t=e).offsetWidth||t.offsetHeight||t.getClientRects().length),i="hidden"===window.getComputedStyle(t).visibility,!(n||i);var t,n,i})}function i(e){e&&e.focus&&e.focus()}function o(e){var t=n(e);t.length&&i(t[0])}return function(t,a,d){var r={main:document.getElementById(a),dialog:document.getElementById(t)},l=function(){var e=Object.create(null);return{on:function(t,n){if(t&&n){var i=e[t]=e[t]||[];-1==i.indexOf(n)&&i.push(n)}},off:function(t,n){void 0===n&&(n=!1),n?e[t].splice(e[t].indexOf(n),1):delete e[t]},emit:function(t){for(var n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];(e[t]||[]).forEach(function(e){return e.apply(e,n)})}}}();if(!r.dialog)throw new Error('No element with the id "'+t+'"');if(!r.main)throw new Error('No element with the id "'+a+'"');var c=Object.assign({},e,d),u=function(e,t){var a=!1,d=void 0;function r(t){var n=!e.contains(document.activeElement);t.preventDefault(),t.stopImmediatePropagation(),n&&a&&o(e)}function l(t){"Tab"===t.key&&function(e,t){var o=document.activeElement,a=n(e),d=a[0],r=a[a.length-1];t.shiftKey&&o===d&&(i(r),t.preventDefault()),t.shiftKey||o!==r||(i(d),t.preventDefault())}(e,t)}return{activate:function(){a||(a=!0,d=document.activeElement,t&&e.contains(t)?i(t):o(e),document.addEventListener("focus",r,!0),document.addEventListener("keydown",l,!0))},deactivate:function(){a&&(a=!1,i(d),d=void 0,document.removeEventListener("focus",r,!0),document.removeEventListener("keydown",l,!0))}}}(r.dialog,c.focus),s=!1,f=!1;function m(e){"Escape"===e.key&&g()}function b(){var e=c.alert?"alertdialog":"dialog",t=document.getElementById(c.label)?"labeledby":"label";if(r.main.setAttribute("aria-hidden",!1),r.dialog.setAttribute("role",e),r.dialog.setAttribute("aria-modal",!0),r.dialog.setAttribute("aria-"+t,c.label),r.dialog.setAttribute("aria-hidden",!0),document.getElementById(c.description))r.dialog.setAttribute("aria-describedby",c.description);else if(c.description)throw new Error('Invalid element: No element with the id "'+c.description+'"');r.main.contains(r.dialog)&&document.body.appendChild(r.dialog),f=!0,l.emit("create",r.dialog)}function v(){!s&&f&&(s=!0,r.main.setAttribute("aria-hidden",!0),r.dialog.setAttribute("aria-hidden",!1),r.dialog.classList.add(c.openClass),l.emit("open",r.dialog),document.addEventListener("keydown",m,!0),u.activate())}function g(){s&&f&&(u.deactivate(),s=!1,r.main.setAttribute("aria-hidden",!1),r.dialog.setAttribute("aria-hidden",!0),document.removeEventListener("keydown",m,!0),r.dialog.classList.remove(c.openClass),l.emit("close",r.dialog))}return c.autoInit&&b(),{elements:r,create:b,destroy:function(){g(),f=!1,["aria-describedby","aria-label","aria-labeledby","aria-modal","role"].forEach(function(e){return r.dialog.removeAttribute(e)}),l.emit("destroy",r.dialog)},open:v,close:g,toggle:function(e){void 0===e&&(e=!s),e?v():g()},isOpen:s,on:l.on,off:l.off}}});
//# sourceMappingURL=dialog.umd.js.map
